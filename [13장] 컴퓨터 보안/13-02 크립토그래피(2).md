## 암호학적 해시 함수

<br/>

암호학적 해시 함수의 특징은 `단방향` 함수라는 점이다.   
입력에서 해시값을 만들어내기는 쉬워도, 해시에서 입력을 만들어낼 수 없거나 만들기 굉장히 어렵다.   

다른 특징 중 하나는,      
차이가 조금!있는 여러 입력 데이터에 암호학적 해시 함수를 적용해 만든 해시값들은 서로 연관 관계가 없어 보여야 한다는 점이다.

암호학적 해시 함수는 도용이 아주 어렵게 설계되어야 한다.   
해시가 주어져도 그 해시를 만들어낸 입력데이터를 예측할 수 없게 해야한다.   

2020년 기준으로 우리는 SHA 알고리즘을 변형한 해시 알고리즘을 사용하고 있다.

<br/>

## 디지털 서명

<br/>

크립토그래피를 사용하면, 디지털 서명을 통해 데이터가 진본임을 검증할 수 있다.   
디지털 서명은 `정합성` / `부인 방지` / `인증 기능`을 제공한다.   

`정합성`     
메세지가 변조되었는지, 원본인지 검증할 수 있다는 뜻이다.   
정합성 검증은 데이터의 암호학적 해시값을 계산해 데이터 뒤에 추가함으로써 이뤄진다.     
송신자 누구나 메세지 뒤에 아무 해시나 붙여서 보낼 수 있으므로, 자신의 비밀키로 암호화한 해시를 덧붙여 전송한다.   
수신자는 공개키를 통해 해시를 복호화 할 수 있다.   

```
*서명* 의 경우 공개키와 비밀키의 역할이 반대이다.   
공개키 암호화 시스템에서 공개키로 암호화한 정보를 비밀키로 해제하는 것은 *항상* 가능하지만,   
비밀키로 암호화한 정보를 공개키로 해제하는 것은 항상 가능하진 않다.   
RSA나 요즘 블록체인 기술에서 자주 사용되는 `elliptic curve cryptography(타원 곡선 암호)` 는 양방향으로 암호화와 복호화가 가능하다.   
이러한 암호 시스템만 서명에 사용할 수 있다.
```

`부인 방지`    
비밀키를 사용하기 때문에, 메세지를 보낸 사람이 자신이 서명했음을 부인하기가 어렵다.   

`인증`    
수신자는 공개키와 서명한 사람의 비밀키가 연관이 있음을 알고 있기 때문에 메세지에 서명한 사람을 확신할 수 있고,     
변조가 되지 않았음은 해시값으로부터 확인할 수 있기때문에 수신자가 받은 메세지가 원본과 같은 메세지임을 확인할 수 있다.

<br/>

## 공개키 인프라

<br/>

공개키 암호화를 사용했을 때 생길 수 있는 문제를 예시로 살펴보자.   
웹 브라우저의 HTTPS (안전한) 연결을 사용해 은행에 접속하는 경우를 생각해보자.   
은행은 자신의 공개키를 브라우저에 전송하고, 브라우저는 은행이 보낸 공개키를 사용해 데이터를 암호화한다.   
이때 은행에서 온 공개키가 진짜 은행것임을 브라우저가 확신할 수 있을까 ?

오늘날에는 `PKI(Public Key Infrastructure)` 공개키 인프라스트럭쳐를 사용한다.   
이 인프라에는 우리가 신뢰할 수 있는 제 3자 인증 기관 (`CA(Certificate Authority)`) 이 있어서,   
어떤 키가 어떤 당사자의 것임을 인증해준다.   

이 방법이 좋지 않은 이유는, 인증 기관 또한 해킹을 당하거나 직원이 일 처리중에 실수를 했을 때 등   
근본적인 이유는 해결하지 못했기 때문에 신뢰 문제가 생길 수 있는 점이다.   
실제로 일부 인증 기관은 인증서를 요청하는 기관을 제대로 검증하지 않아서 안전하지 않다는 사실이 드러나기도 했다.

<br/>

## 블록 체인

<br/>

블록 체인은 크립토르래피를 응용한 또 다른 분야다.   
블록 체인 개념이 등장하게 된 계기는 앞서 살펴봤던 문제점들을 해결하고 불편함을 해소하는 데에 있다.   

블록 체인에서 저장하고자 하는 정보를 담고 있는 한 줄을 `블록` 이라고 부른다.   
새 블록을 만들 때는 이전 블록에 대한 암호학적 해시와 블록 생성 시간을 추가한다.   
이로 인해 블록의 해시와 타임스탬프에 의해 연결된 블록의 체인이 생긴다.   

즉 1개의 블록 내용을 업데이트하게 되면,    
해당 블록의 해시가 바뀌기 때문에 이후 블록에 적용된 해시와 일치하지 않게 된다.   
암호학적 해시의 특성으로 인해 해시를 유지하면서도 블록 정보를 변조할 수 있는 가능성은 없다 !   
즉, 현재 블록이 이전 블록에 대한 디지털 서명을 포함한 것 같은 효과가 있다.   

블록 체인을 공격하는 유일한 방법은, 블록 체인을 다루는 소프트웨어를 변경하는 방법밖에는 없다.   
블록 체인 데이터가 공개되어 있고, 수많은 시스템에 중복적으로 적용되어있기 떄문에 이 시스템을 공격하려면 많은 사람들의 결탁과 합심이 필요하다.

<br/>

## 패스워드 관리

<br/>

크립토그래피의 응용분야로, `password management` 패스 워드 관리가 있다.   
예전에는 컴퓨터 내에 있는 패스워드 파일에 패스워드가 *평문* 으로 저장되었다. ㄷㄷ   
이 방법은 파일에 접근만 할 수 있으면 누구나, 모든 사람의 패스워드를 알 수 있기 때문에 좋지 않은 방법이다.   

그래서 많은 기업들이 패스워드 백업을 자신이 아닌 제 3자 기관에 보내서 저장하는 방식을 택했다.   
그러나 이또한 누군가가 백업에 있는 다른 데이터에 접근할 수 있기 때문에 보안에 좋지 않다.   

이 문제의 간단한 해법은, 패스워드를 암호학적 해시와 같이 암호화된 형태로 저장하는 것이다!   
사용자가 로그인을 시도하면 패스워드를 암호학적 해시로 변환해서 파일에 있는 해시와 비교한다.   
암호학적 해시의 특성때문에 패스워드를 추측하기 매우 어려워진다.   

그러나 이러한 방법을 동원해도 패스워드 사용에는 문제가 많다.   
은행, 학교, 쇼핑몰 등등 모든 온라인 상점에 대한 패스워드를 기억해야하기 때문에, 패스워드를 통일해서 사용하는 사람도 있다.   
한 사이트가 공격당하면 다른 모든 사이트에서도 해당 패스워드는 사용할 수 없게 된다.   

그나마 효과적인 방법은, 2단계 인증을 하는 것이다.    
2단계 인증은 보통 휴대폰을 사용하기때문에 만약 휴대폰이 없다면 계정에 접근할 수 없는 문제가 생기기도 한다.   
그리고 2단계 인증은 매우 귀찮기 때문에 여러 사람들은 여러 사이트에서 로그인 상태를 유지하는 걸 택한다.

<br/>
