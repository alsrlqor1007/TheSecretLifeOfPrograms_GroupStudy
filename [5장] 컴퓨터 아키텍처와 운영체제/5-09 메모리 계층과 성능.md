# 메모리 계층과 성능

> ### 메모리 계층 구조란?
- 메모리는 가격과 성능이 비례하고 성능과 용량은 반비례한다.
- 각각의 특징이 있는 서로 다른 여러 종류의 저장 장치를 함께 사용하여 `최적의 효율`을 낼 수 있게 `가격 대비 좋은 성능`의 컴퓨터를 구현하기 위함

<img width="601" alt="image" src="https://user-images.githubusercontent.com/91880235/173183504-520672c9-aedc-4748-a2f7-b53ea98d35cd.png">

<br>

> ### 컴퓨터 메모리의 종류

### 1. 레지스터
- 컴퓨터에서 제일 빠른 메모리로, CPU 계산 과정에서 작동한다. 
- 컴퓨터에서 4대 주요 기능(기억, 해석, 연산, 제어)을 관할하는 장치
- CPU는 자체적으로 데이터를 저장할 방법이 없으므로 메모리로 직접 데이터를 전송할 수 없음

  → 연산을 위해서 반드시 레지스터를 거쳐야 하며, 이를 위해 레지스터는 특정 주소를 가리키거나 값을 읽어올 수 있음

- CPU 내부 레지스터 종류로는 `프로그램 카운터`, `누산기`, `명령어 레지스터`, `상태 레지스터` 등이 있다.

<br>

### 2. 캐시 메모리
- 레지스터 다음으로 빠른 메모리로, CPU와의 거리에 따라 `L1 ~ L3 캐시` 등 여러 단계로 나뉜다.
- 데이터나 값을 미리 복사해 놓는 임시 장소로, 보통 <u>SRAM</u>으로 구성되며 숫자가 작을수록 CPU에 가까운 상위레벨 캐시로 용량이 작고 빠르다.
- 속도가 빠른 장치와 느린 장치 사이에서 속도차에 따른 <u>병목 현상을 완화</u>하기 위한 범용 메모리

  
### 2-1 캐시메모리의 지역성:

- 데이터 접근이 시간적, 혹은 공간적으로 가깝게 일어나는 것
- 캐시가 효율적으로 동작하기 위해서는 캐시가 저장할 데이터가 지역성을 가져야 함

|종류|설명|
|---|--|
|시간적 지역성 |	특정 데이터가 한 번 접근되었을 경우, 가까운 미래에 또 한 번 데이터에 접근할 가능성이 높음
|공간적 지역성 |	액세스 된 기억장소와 인접한 기억장소가 액세스 될 가능성이 높음|

<br>

### 3. 메인 메모리
- CPU, 메인보드와 분리되어있는 메모리 중 `최상위 메모리`로 `RAM`과 `ROM`이 해당 
- 컴퓨터가 빠른 액세스를 하기 위해 데이터를 단기간 저장하는 구성 요소
- 사용자가 요청하는 프로그램이나 문서를 스토리지에서 메모리로 로드하여 각각의 정보에 액세스
- 스토리지(SSD, HDD)와 비교하면 차원이 다르게 빠름 

<br>

### 4. 스토리지 (SSD, HDD)
- `보조 기억장치`로 불린다.
- 주로 ATA(Advanced Technology Attachment, 고급기술결합)라는 중간 인터페이스 규격과 연결되어 통신한다.
- NVMe SSD는 CPU와 직접 통신한다.

<br>

### 5. 이동식 저장장치
- USB 메모리, ODD 등을 의미
- 기업용으로는 자기 테이프 등..

<br>

> ### 참조의 지역성

- 컴퓨터 프로그램은 메모리의 같은 지역을 자주 확인하는 경향이 있다.
- 게임을 예로 들어 `메이플스토리`라는 게임을 플레이한다면 바뀌지 않는 `맵`을
  비싼 CPU에 올릴 필요는 없다. 그래서 RAM에 올려두고 유동적으로 움직이는 `캐릭터`를 빠른  캐시에 올려다 주면 된다. 

<br>

> ### 참고

- [메모리 계층구조 - 나무위키](https://namu.wiki/w/%EB%A9%94%EB%AA%A8%EB%A6%AC%20%EA%B3%84%EC%B8%B5%20%EA%B5%AC%EC%A1%B0)
- [ATA - 나무위키](https://namu.wiki/w/Advanced%20Technology%20Attachment)
- [[OS] 메모리 계층 구조(Memory Hierachy)](https://velog.io/@yu-jin-song/CS-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0)